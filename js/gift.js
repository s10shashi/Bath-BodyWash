var data = [
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw718f110f/large/026341933.jpg",
      name: "Clean State",
      disc: "Ultra Shea Body Cream",
      strikeoff: "$15.50",
      rate: "Now $3.87",
      p1: "",
      smell: "FRUITY",
      type: "BODY CREAM",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwc4dce2be/large/024371738.jpg",
      name: "Clean State",
      disc: "3-in-1 Hair, Face & Body Wash",
      strikeoff: "$14.50",
      rate: "Now $3.62",
      p1: "Mix & Match: Buy 3, Get 3 Free",
      smell: "FRESH",
      type: "ALL",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw0a35c648/large/026205535.jpg",
      name: "Stone",
      disc: "Body Lotion",
      strikeoff: "$13.50",
      rate: "Now $3.37",
      p1: "Mix & Match: Buy 3, Get 3 Free",
      smell: "SWEET",
      type: "BODY LOTION",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwbfa884d4/large/0ta5btldogk58f7_667555833004.jpg",
      name: "Bourbon",
      disc: "Body Lotion",
      strikeoff: "$13.50",
      rate: "Now $3.37",
      p1: "",
      smell: "SWEET",
      type: "BODY LOTION",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwfbf019bf/large/qy43zporekih9ft_667554990005.jpg",
      name: "Noir",
      disc: "3 in 1 Hair, Face & Body Wash",
      strikeoff: "$0",
      rate: "Now $14.50",
      p1: "",
      smell: "FRESH",
      type: "ALL",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw26b6531e/large/qira4fmiyo40k34_26297782.jpg",
      name: "Teak Wood",
      disc: "3 in 1 Hair, Face & Body Wash",
      strikeoff: "$0",
      rate: "Now $13.87",
      p1: "",
      smell: "WOODY",
      type: "ALL",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwd7cc31d1/large/026205533.jpg",
      name: "Ocean",
      disc: "Concentrated Room Spray",
      strikeoff: "$15.50",
      rate: "Now $3.87",
      p1: "Mix & Match: Buy 3, Get 3 Free",
      smell: "FRESH",
      type: "BODY SPRAY",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwc5c9140d/large/lffsd298n6ouwrb_26297787.jpg",
      name: "Noir",
      disc: "Body Spray",
      strikeoff: "$0",
      rate: "Now $14.50",
      p1: "",
      smell: "WOODY",
      type: "BODY SPRAY",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw7c7f922c/large/026399754.jpg",
      name: "Whiskey Reserve",
      disc: "3 in 1 Hair, Face & Body Wash",
      strikeoff: "$14.50",
      rate: "Now $3.62",
      p1: "",
      smell: "WOODY",
      type: "ALL",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw8fa231c7/large/026264321.jpg",
      name: "Ocean",
      disc: "Hand Sanitizer",
      strikeoff: "$15.50",
      rate: "Now $3.87",
      p1: "",
      smell: "FRESH",
      type: "BODY LOTION",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw18847443/large/024563161.jpg",
      name: "Stone",
      disc: "Ulitmate Hydration Body Cream",
      strikeoff: "$15.50",
      rate: "Now $3.87",
      p1: "Mix & Match: Buy 3, Get 3 Free",
      smell: "SWEET",
      type: "BODY CREAM",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw6c302420/large/024563166.jpg",
      name: "TeakWood",
      disc: "Deodrant",
      strikeoff: "$15.50",
      rate: "Now $3.87",
      p1: "Mix & Match: Buy 3, Get 3 Free",
      smell: "WOODY",
      type: "BODY SPRAY",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dw2133a140/large/026385297.jpg",
      name: "Sweater Weather",
      disc: "Gentle Gel Hair Soap",
      strikeoff: "$7.50",
      rate: "Now $3.27",
      p1: "",
      smell: "FRESH",
      type: "BODY CREAM",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwb5fe83f7/large/026401718.jpg",
      name: "White Adjustable",
      disc: "Wallflowers Scent Controlâ„¢ Plug",
      strikeoff: "$0",
      rate: "Now $12.57",
      p1: "",
      smell: "FRUITY",
      type: "BODY SPRAY",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwe7007a7c/large/024563165.jpg",
      name: "Marble",
      disc: "Ultimate Hydrogen Body Cream",
      strikeoff: "$0",
      rate: "Now $13.87",
      p1: "",
      smell: "SWEET",
      type: "BODY CREAM",
    },
    {
      img: "https://www.bathandbodyworks.in/on/demandware.static/-/Sites-bathandbody_master_catalog/default/dwa9b354f7/large/026181466.jpg",
      name: "Graphite",
      disc: "Antiperpirant Deodrant",
      strikeoff: "$15.50",
      rate: "Now $13.87",
      p1: "Mix & Match: Buy 3, Get 3 Free",
      smell: "WOODY",
      type: "BODY SPRAY",
    },
  ];
  localStorage.setItem("Data", JSON.stringify(data));
  var mensData = JSON.parse(localStorage.getItem("Data"));

  document.querySelector("#qty").textContent = data.length + " items";

  var cartArray = JSON.parse(localStorage.getItem("cartItems")) || [];

  createProduct(mensData);

  function createProduct(mensData) {
    document.querySelector("#container").innerHTML = "";

    mensData.map(function (ele) {
      var pro = document.createElement("div");
      pro.setAttribute("class", "product");

      var top = document.createElement("div");
      top.setAttribute("id", "top");

      var img = document.createElement("img");
      img.setAttribute("src", ele.img);

      top.append(img);

      var bot1 = document.createElement("div");
      bot1.setAttribute("id", "bottom");

      var h3 = document.createElement("h3");
      h3.textContent = ele.name;

      var p1 = document.createElement("p");
      p1.setAttribute("id", "disc");
      p1.textContent = ele.disc;

      var sttext = document.createElement("div");
      sttext.setAttribute("id", "stText");

      var h3_2 = document.createElement("h3");
      h3_2.setAttribute("id", "strike");
      h3_2.textContent = ele.strikeoff;

      var h3_3 = document.createElement("h3");
      h3_3.setAttribute("id", "rate");
      h3_3.textContent = ele.rate;

      sttext.append(h3_2, h3_3);

      var p2 = document.createElement("p");
      p2.textContent = ele.p1;

      bot1.append(h3, p1, sttext, p2);

      var bot2 = document.createElement("div");
      bot2.setAttribute("id", "bottom2");

      var imp = document.createElement("input");
      imp.setAttribute("type", "button");
      imp.setAttribute("id", "button");
      imp.value = "ADD TO BAG";

      imp.addEventListener("click", function () {
        addTOCart(ele);
      });

      var str = document.createElement("div");
      str.setAttribute("class", "star");

      for (var i = 1; i <= 5; i++) {
        var sp = document.createElement("span");
        sp.setAttribute("id", i + "one");
        sp.setAttribute("class", "fa fa-star fa-3x");
        sp.setAttribute("onclick", "starmark(this)");
        str.append(sp);
      }
      bot2.append(imp, str);

      pro.append(top, bot1, bot2);

      document.querySelector("#container").append(pro);
    });
  }

  function addTOCart(ele) {
    cartArray.push(ele);
    console.log(cartArray);
    localStorage.setItem("cartItems", JSON.stringify(cartArray));
    alert("added to cart");
  }

  function starmark(item) {
    var count = item.id[0];
    var subid = item.id.substring(1);
    for (var i = 0; i < 5; i++) {
      if (i < count) {
        document
          .getElementById(i + 1 + subid)
          .setAttribute("class", "fa fa-star fa-3x checked");
      }
    }
  }

  function sort() {
    var val = document.querySelector("#sorttag").value;

    if (val == "Low To High") {
      data.sort(function (a, b) {
        return Number(a.rate.substring(5)) - Number(b.rate.substring(5));
      });
      createProduct(data);
    } else if (val == "High To Low") {
      data.sort(function (a, b) {
        return Number(b.rate.substring(5)) - Number(a.rate.substring(5));
      });
      createProduct(data);
    } else {
      createProduct(mensData);
      document.querySelector("#qty").textContent = mensData.length + " items";
    }
  }

  function smell() {
    var val = document.querySelector("#smellTag").value;

    if (val == "FRESH") {
      var arr = data.filter(function (ele) {
        return ele.smell == "FRESH";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "FRUITY") {
      var arr = data.filter(function (ele) {
        return ele.smell == "FRUITY";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "SWEET") {
      var arr = data.filter(function (ele) {
        return ele.smell == "SWEET";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "WOODY") {
      var arr = data.filter(function (ele) {
        return ele.smell == "WOODY";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
  }
  function offer() {
    var val = document.querySelector("#offerTag").value;

    if (val == "OFFER") {
      var arr = data.filter(function (ele) {
        return ele.p1 !== "";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "REGULAR") {
      var arr = data.filter(function (ele) {
        return ele.p1 == "";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
  }
  function typeT() {
    var val = document.querySelector("#typeTag").value;

    if (val == "BODY CREAM") {
      var arr = data.filter(function (ele) {
        return ele.type == "BODY CREAM" || ele.type == "ALL";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "BODY LOTION") {
      var arr = data.filter(function (ele) {
        return ele.type == "BODY LOTION" || ele.type == "ALL";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "BODY SPRAY") {
      var arr = data.filter(function (ele) {
        return ele.type == "BODY SPRAY" || ele.type == "ALL";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
    if (val == "BODY SOAP") {
      var arr = data.filter(function (ele) {
        return ele.type == "BODY SOAP" || ele.type == "ALL";
      });
      createProduct(arr);
      document.querySelector("#qty").textContent = arr.length + " items";
    }
  }
  document.querySelector("#search + span").addEventListener("click", search);

  function search() {
    var res = document.querySelector("#search").value;
    res = res.toLocaleLowerCase();

    var arr = data.filter(function (ele) {
      var name = ele.name.toLocaleLowerCase();
      return name.includes(res);
    });
    createProduct(arr);
    document.querySelector("#qty").textContent = arr.length + " items";
  }